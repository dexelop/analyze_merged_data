# 분석 로직 문서

> 각 분석 단계별 상세 로직 문서

---

## 문서 목록

| 번호 | 문서 | 설명 |
|:----:|------|------|
| 00 | [데이터 로드](./00_데이터_로드.md) | JSON 파일 로드 및 검증 |
| 01 | [파생 컬럼 생성](./01_파생컬럼_생성.md) | is_vat, 소스유형, 요일 등 계산 |
| 02 | [기본 피벗 분석](./02_기본피벗_분석.md) | 손익계산서 구조 요약 피벗 |
| 03 | [거래처별 분석](./03_거래처별_분석.md) | 계정과목별 거래처 TOP 10 |
| 04 | [증빙유형별 분석](./04_증빙유형별_분석.md) | 증빙 분포 및 증빙률 |
| 05 | [월별 추이 분석](./05_월별추이_분석.md) | 손익분류별 월별 추이 |
| 06 | [카드 현황 분석](./06_카드현황_분석.md) | 카드 전표 처리 상태 |
| 07 | [카드미반영 상세](./07_카드미반영_상세.md) | 미반영 거래 목록 |
| 08 | [이상 거래 탐지](./08_이상거래_탐지.md) | Z-score 기반 이상 탐지 |
| 09 | [출력 포맷](./09_출력_포맷.md) | Excel/JSON 출력 형식 |

---

## 처리 흐름

```
┌─────────────────┐
│  00. 데이터 로드  │
└────────┬────────┘
         ▼
┌─────────────────┐
│ 01. 파생 컬럼 생성 │
└────────┬────────┘
         ▼
┌────────────────────────────────────────┐
│              분석 단계                   │
│  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐   │
│  │ 02   │ │ 03   │ │ 04   │ │ 05   │   │
│  │기본  │ │거래처│ │증빙  │ │월별  │   │
│  │피벗  │ │분석  │ │유형별│ │추이  │   │
│  └──────┘ └──────┘ └──────┘ └──────┘   │
│  ┌──────┐ ┌──────┐ ┌──────┐            │
│  │ 06   │ │ 07   │ │ 08   │            │
│  │카드  │ │카드  │ │이상  │            │
│  │현황  │ │미반영│ │탐지  │            │
│  └──────┘ └──────┘ └──────┘            │
└────────────────────┬───────────────────┘
                     ▼
         ┌─────────────────┐
         │  09. 출력 포맷   │
         │  Excel + JSON   │
         └─────────────────┘
```

---

## 현재 구현 상태

| 문서 | 구현 | 비고 |
|------|:----:|------|
| 00. 데이터 로드 | ✅ | |
| 01. 파생 컬럼 생성 | ✅ | |
| 02. 기본 피벗 분석 | ✅ | |
| 03. 거래처별 분석 | ✅ | TOP 10만 |
| 04. 증빙유형별 분석 | ✅ | |
| 05. 월별 추이 분석 | ✅ | |
| 06. 카드 현황 분석 | ✅ | |
| 07. 카드미반영 상세 | ✅ | |
| 08. 이상 거래 탐지 | ❌ | 미구현 |
| 09. 출력 포맷 | ✅ | |

---

## 관련 파일

- 구현 스크립트: `src/analyze_thej.py`
- 상위 지침서: `IMPLEMENTATION_GUIDE.md`
- 코드표: `new_docs/CODE_REFERENCE.md`
